{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "Analyze Self",
      "type": "shell",
      "command": "npx",
      "args": [
        "ts-node",
        "src/cli.ts",
        "analyze",
        "${workspaceFolder}",
        "${workspaceFolder}/output/self-analysis",
        "self"
      ],
      "group": {
        "kind": "build",
        "isDefault": true
      },
      "presentation": {
        "reveal": "always",
        "panel": "new",
        "focus": true
      },
      "problemMatcher": [],
      "detail": "Analyze this codebase using its own code analysis tools",
      "options": {
        "env": {
          "NEO4J_URI": "neo4j://localhost:7687",
          "NEO4J_USERNAME": "neo4j",
          "NEO4J_PASSWORD": "justdontask"
        }
      }
    },
    {
      "label": "Analyze Self (JSON Only)",
      "type": "shell",
      "command": "npx",
      "args": [
        "ts-node",
        "src/cli.ts",
        "analyze",
        "${workspaceFolder}",
        "${workspaceFolder}/output/self-analysis",
        "self"
      ],
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "new",
        "focus": true
      },
      "problemMatcher": [],
      "detail": "Analyze this codebase without importing to Neo4j (JSON output only)"
    },
    {
      "label": "Query Self Analysis",
      "type": "shell",
      "command": "ts-node",
      "args": [
        "src/cli.ts",
        "query",
        "self",
        "${input:cypherQuery}"
      ],
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "new",
        "focus": true
      },
      "problemMatcher": [],
      "detail": "Run a Cypher query against the self-analysis graph in Neo4j",
      "options": {
        "env": {
          "NEO4J_URI": "neo4j://localhost:7687",
          "NEO4J_USERNAME": "neo4j",
          "NEO4J_PASSWORD": "password"
        }
      }
    },
    {
      "label": "Generate Schema Report",
      "type": "shell",
      "command": "ts-node",
      "args": [
        "-e",
        "const report = require('./src/schema/index.ts'); console.log(JSON.stringify(report.SCHEMA_METADATA, null, 2));"
      ],
      "group": "build",
      "presentation": {
        "reveal": "always",
        "panel": "new",
        "focus": true
      },
      "problemMatcher": [],
      "detail": "Generate a report of the current schema metadata"
    }
  ],
  "inputs": [
    {
      "id": "cypherQuery",
      "description": "Cypher query to run against the Neo4j database",
      "default": "MATCH (n:CodeElement) RETURN n.name, labels(n) LIMIT 10",
      "type": "promptString"
    }
  ]
}